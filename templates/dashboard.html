<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <title>User Setup</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>

    <title>Welcome!</title>
</head>

<style>
* {box-sizing: border-box;}

h1 {text-align: center;}
h2 {text-align: center; margin-left: 25px;}
h3 {text-align: center;}
h4 {text-align: center;}
h5 {text-align: center;}


.btn-group input {
  background-color: #3BBA67; /* Green background */
  border: 1px solid green; /* Green border */
  color: white; /* White text */
  padding: 10px 24px; /* Some padding */
  cursor: pointer; /* Pointer/hand icon */
  float: left; /* Float the buttons side by side */
}

.btn-group input:not(:last-child) {
  border-right: none; /* Prevent double borders */
}

/* Clear floats (clearfix hack) */
.btn-group:after {
  content: "";
  clear: both;
  display: table;
}

/* Add a background color on hover */
.btn-group input:hover {
  background-color: #59EB65;
}

.fundraiserBoxes{
border-radius: 25px;
float: left;
display: inline-block;
width: 400px;
height: 650px;
border: 5px solid #46D44B;
list-style: none;
background-color: #8DFA89;
padding: 10px;
position: relative;
}

.bottom {
position: absolute;
bottom: 0;
width: 95%;
}

.options{
padding: 20px;
}

#OwnedFundraisers{
float: center;
position: relative;
clear: both;
}

#donations{
float: center;
position: relative;
clear: both;
}

/* Style the navbar */
.topnav {
  overflow: hidden;
  background-color: #333;
}

/* Navbar links */
.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px;
  text-decoration: none;
}
.topnav a:hover {
    color: green;
    }

/* The sticky class is added to the navbar with JS when it reaches its scroll position */
.sticky {
  position: fixed;
  top: 0;
  width: 100%;
}

/* Add some top padding to the page content to prevent sudden quick movement (as the navigation bar gets a new position at the top of the page (position:fixed and top:0) */
.sticky + .content {
  padding-top: 60px;
}

</style>



<body>

{% if isGuest == True  %}
<div class="topnav">
    <a class="active" href="/dashboard">Home</a>
    <a href="/login">Login</a>
    <a href="/new-user-form">Sign Up!</a>
</div>

{% endif %}

{% if isGuest == False  %}
<!--button menu-->
<div class="topnav">
    <a class="active" href="/dashboard">Home</a>
    <a href="/new-fundraiser-form">New fundraiser</a>
    <a href="/new-donation-form/<fund_ID>">Make a Donation</a>
</div>

{% endif %}
<div class="content">
    <div class="container-fluid p-5 bg-success text-white text-center">
        <h1>Hello {{ name }}!</h1>
        <br>
        <h2>Welcome to ComeFundMe Fundraising</h2>
    </div>
</div>

{% if isGuest == False%}
<br>
<h3>Fundraisers You Own:</h3>
<div id="OwnedFundraisers">
    <ul >
        {% for row in userOwnedFund %}
            <div class="fundraiserBoxes" style="margin: 25px">
                <center>
                    <li><a href="fundraiser/{{ row[2] }}" style="text-decoration:none">  <h7 style="font-size: 20px"> <strong>{{row[0]}} </strong> <br> </h7> <img src="/static/{{row[3]}}" alt="no image" width="350" height="350"> </a></li>
                    Created By: {{row[7]}} <br> <br>{{row[1]}}
                </center>
                <br><br>
                <div class="bottom">
                    <p style="text-align:left;">
                        Balance: ${{row[5]}}
                        <span style="float:right;">
                            Goal: ${{row[4]}}
                        </span>
                    </p>
                    {% if row[6] >= 100 %}
                        <div class="w3-container">
                            <div class="w3-light-grey w3-round-xlarge">
                                <div class="w3-container w3-green w3-round-xlarge" style="width: 100%"> <center style="color:black;"> {{row[6]}}% </center> </div>
                            </div>
                        </div>
                    {% endif %}
                    {% if row[6] < 100 %}
                        <div class="w3-container">
                            <div class="w3-light-gray w3-round-xlarge">
                                <div class="w3-container w3-green w3-round-xlarge" style="width: {{row[6]}}%"> <center style="color:black;"> {{row[6]}}% </center></div>
                            </div>
                    </div>
                    {% endif %}
                    <br>
                </div>

            </div>
            &nbsp
        {% endfor %}
    </ul>
</div>

    <br>

    <div id="donations">
    <h4>Donations You Have Made:</h4>
    <table style="border:1px solid black;" align="center">
        <thread>
            <tr style="border:1px solid black;">
                <th style="border:1px solid black;">TITLE</th>
                <th style="border:1px solid black;">AMOUNT</th>
            </tr>
        </thread>
        <tbody>
        <tr>
        {% for row in userDonorTable %}
            <td style="border:1px solid black;"><a href="fundraiser/{{ row[2] }}">{{row[0]}}</a></td>
            <td style="border:1px solid black;">{{row[1]}}</td>
        </tr>
        {% endfor%}
        </tbody>
    </table>
    </div>
{% endif %}
    <br>

    <section>
        <h2 class="heading-1 mb4x">Featured Fundraisers</h2>
    </section>

    <form action="" class="options">
        <select id="tag" onchange="getTag(this.value)">
            <option value="All">All Fundraisers</option>
            <option value="Animals">Animals</option>
            <option value="Business">Business</option>
            <option value="Community">Community</option>
            <option value="Creative">Creative</option>
            <option value="Education">Education</option>
            <option value="Emergencies">Emergencies</option>
            <option value="Environment">Environment</option>
            <option value="Event">Event</option>
            <option value="Faith">Faith</option>
            <option value="Family">Family</option>
            <option value="Funeral and Memorial">Funeral and Memorial</option>
            <option value="Medical">Medical</option>
            <option value="Monthly Bills">Monthly Bills</option>
            <option value="Newlyweds">Newlyweds</option>
            <option value="Other">Other</option>
            <option value="Sports">Sports</option>
            <option value="Travel">Travel</option>
            <option value="Volunteer">Volunteer</option>
            <option value="Wishes">Wishes</option>
        </select>
    </form>

    <div id="fundList">
        <ul>
        {% for row in fundraiserTable %}
            <div class="fundraiserBoxes" style="margin: 25px">
                <center>
                    <li><a href="fundraiser/{{ row[2] }}" style="text-decoration:none">  <h7 style="font-size: 20px"> <strong>{{row[0]}} </strong> <br> </h7> <img src="/static/{{row[3]}}" alt="no image" width="350" height="350"> </a></li>
                    Created By: {{row[7]}} <br> <br>{{row[1]}}
                </center>
                <br><br>
                <div class="bottom">
                    <p style="text-align:left;">
                        Balance: ${{row[5]}}
                        <span style="float:right;">
                            Goal: ${{row[4]}}
                        </span>
                    </p>
                    {% if row[6] >= 100 %}
                    <div class="w3-container">
                        <div class="w3-light-grey w3-round-xlarge">
                            <div class="w3-container w3-green w3-round-xlarge" style="width: 100%"> <center style="color:black;"> {{row[6]}}% </center> </div>
                        </div>
                    </div>
                    {% endif %}
                    {% if row[6] < 100 %}
                    <div class="w3-container">
                        <div class="w3-light-gray w3-round-xlarge">
                            <div class="w3-container w3-green w3-round-xlarge" style="width: {{row[6]}}%"> <center style="color:black;"> {{row[6]}}% </center></div>
                        </div>
                    </div>
                    {% endif %}
                    <br>
                </div>
            </div>
            &nbsp
        {% endfor %}
        </ul>
    </div>
    <br>
</div>

<script>
function getTag(str) {
  if (str == "") {
    document.getElementById("fundList").innerHTML = "";
    return;
  }

  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    document.getElementById("fundList").innerHTML = this.responseText;
  }
  xhttp.open("GET", "/tagSort/"+str);
  xhttp.send();
}
</script>

<script>
window.onscroll = function() {myFunction()};

var topnav = document.getElementById("topnav");
var sticky = topnav.offsetTop;

function myFunction() {
  if (window.pageYOffset >= sticky) {
    topnav.classList.add("sticky")
  } else {
    topnav.classList.remove("sticky");
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
</body>
